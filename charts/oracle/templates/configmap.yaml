apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "oracle23c.fullname" . | trim }}-init
  labels:
    {{- include "oracle23c.labels" . | nindent 4 }}
data:
  init.sql: |
    -- Oracle 23c 初始化脚本
    CREATE USER test_user IDENTIFIED BY "Test123456";
    GRANT CONNECT, RESOURCE TO test_user;
    GRANT UNLIMITED TABLESPACE TO test_user;
    
    CREATE TABLE test_user.demo_table (
                                          id NUMBER GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
                                          name VARCHAR2(100),
                                          email VARCHAR2(100),
                                          created_date TIMESTAMP DEFAULT SYSTIMESTAMP
    );
    
    INSERT INTO test_user.demo_table (name, email)
    VALUES ('张三', 'zhangsan@example.com');
    
    COMMIT;